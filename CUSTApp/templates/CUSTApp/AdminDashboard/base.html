{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>{% block title %}CUST App{% endblock %}</title>
  <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
  <!-- Fonts and Icons -->
  <link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- CSS Files -->
  <link href="{% static 'assets/css/material-dashboard.css' %}" rel="stylesheet" />
  <!-- Page-specific CSS -->
  <style>
    .page-link {
      border: none !important;

    }

    .active>.page-link {
      background-color: transparent !important;
    }
  </style>
  <style>
    /* CSS Variables for consistent theming */
    :root {
      --sidebar-width: 260px;
      --sidebar-collapsed-width: 70px;
      --primary-color: #0A369D;
      --primary-light: #1E88E5;
      --text-color: #3C4858;
      --text-light: #666;
      --bg-white: #ffffff;
      --bg-light: #f8f9fa;
      --border-color: #e0e0e0;
      --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.15);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --border-radius: 12px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
    }

    /* Reset and base styles */
    * {
      box-sizing: border-box;
    }

    /* Mobile Toggle Button */
    .mobile-toggle {
      display: none;
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1100;
      background: var(--primary-color);
      border: none;
      border-radius: 8px;
      width: 44px;
      height: 44px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .mobile-toggle span {
      width: 20px;
      height: 2px;
      background: white;
      transition: var(--transition);
      border-radius: 1px;
    }

    .mobile-toggle:hover {
      background: var(--primary-light);
      transform: translateY(-1px);
      box-shadow: var(--shadow-hover);
    }

    .mobile-toggle.active span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-toggle.active span:nth-child(2) {
      opacity: 0;
    }

    .mobile-toggle.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -6px);
    }

    /* Sidebar Overlay */
    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1040;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .sidebar-overlay.show {
      opacity: 1;
    }

    /* Main Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: var(--sidebar-width);
      min-width: var(--sidebar-width);
      /* Prevent shrinking */
      max-width: var(--sidebar-width);
      /* Prevent growing */
      height: 100vh;
      background: linear-gradient(180deg, var(--bg-white) 0%, var(--bg-light) 100%);
      border-right: 1px solid var(--border-color);
      box-shadow: var(--shadow);
      z-index: 1050;
      display: flex;
      flex-direction: column;
      transition: var(--transition);
      overflow: hidden;
    }

    /* Logo Section */
    .sidebar .logo {
      padding: var(--spacing-lg) var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
      background: linear-gradient(135deg, rgba(10, 54, 157, 0.03) 0%, rgba(30, 136, 229, 0.03) 100%);
      flex-shrink: 0;
    }

    .sidebar .logo a {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: var(--primary-color);
      font-weight: 600;
      font-size: 18px;
      transition: var(--transition);
      padding: var(--spacing-sm);
      border-radius: var(--spacing-sm);
    }

    .sidebar .logo a:hover {
      color: var(--primary-light);
      background: rgba(10, 54, 157, 0.05);
    }

    .logo-img {
      width: 36px;
      height: 36px;
      margin-right: var(--spacing-md);
      border-radius: 6px;
      flex-shrink: 0;
    }

    .logo-text {
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    /* User Section */
    .sidebar .user {
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
      background: linear-gradient(135deg, rgba(10, 54, 157, 0.02) 0%, rgba(30, 136, 229, 0.02) 100%);
      flex-shrink: 0;
    }

    .sidebar .user .username {
      display: flex;
      align-items: center;
      width: 100%;
      background: none;
      border: none;
      color: var(--text-color);
      font-weight: 500;
      font-size: 14px;
      padding: var(--spacing-sm);
      border-radius: var(--spacing-sm);
      cursor: pointer;
      transition: var(--transition);
      text-align: left;
    }

    .sidebar .user .username:hover {
      background: rgba(10, 54, 157, 0.05);
      color: var(--primary-color);
    }

    .user-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: var(--spacing-md);
      flex-shrink: 0;
    }

    .user-icon i {
      color: white;
      font-size: 18px;
    }

    .user-text {
      flex: 1;
    }

    .dropdown-arrow {
      font-size: 18px;
      transition: var(--transition);
    }

    .username[aria-expanded="true"] .dropdown-arrow {
      transform: rotate(180deg);
    }

    /* Dropdown Navigation */
    .dropdown-nav {
      margin-top: var(--spacing-sm);
      padding-left: 0;
      list-style: none;
    }

    .dropdown-nav .nav-item {
      margin: 0;
    }

    .dropdown-nav .nav-link {
      display: flex;
      align-items: center;
      padding: var(--spacing-sm) var(--spacing-md);
      color: var(--text-light);
      text-decoration: none;
      font-size: 13px;
      border-radius: 6px;
      transition: var(--transition);
      margin: 2px 0;
    }

    .dropdown-nav .nav-link:hover {
      background: rgba(10, 54, 157, 0.08);
      color: var(--primary-color);
      transform: translateX(4px);
    }

    .dropdown-nav .nav-link i {
      font-size: 16px;
      margin-right: var(--spacing-sm);
      width: 20px;
      text-align: center;
    }

    /* Main Navigation */
    .sidebar-wrapper {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-md) 0;
      scrollbar-width: thin;
      scrollbar-color: rgba(10, 54, 157, 0.2) transparent;
    }

    .sidebar-wrapper::-webkit-scrollbar {
      width: 4px;
    }

    .sidebar-wrapper::-webkit-scrollbar-track {
      background: transparent;
    }

    .sidebar-wrapper::-webkit-scrollbar-thumb {
      background: rgba(10, 54, 157, 0.2);
      border-radius: 2px;
    }

    .sidebar-wrapper::-webkit-scrollbar-thumb:hover {
      background: rgba(10, 54, 157, 0.3);
    }

    .nav-container .nav {
      padding: 0;
      list-style: none;
      margin: 0;
    }

    .nav-container .nav-item {
      margin: 4px var(--spacing-md);
    }

    .nav-container .nav-link {
      display: flex;
      align-items: center;
      padding: 14px var(--spacing-md);
      color: var(--text-color);
      text-decoration: none;
      border-radius: var(--border-radius);
      transition: var(--transition);
      font-weight: 500;
      font-size: 14px;
      position: relative;
      overflow: hidden;
    }

    .nav-container .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color) 0%, var(--primary-light) 100%);
      transition: width 0.3s ease;
      z-index: -1;
    }

    .nav-container .nav-link:hover {
      color: var(--primary-color);
      transform: translateX(6px);
      box-shadow: 0 2px 8px rgba(10, 54, 157, 0.15);
    }

    .nav-container .nav-link:hover::before {
      width: 4px;
    }

    .nav-container .nav-item.active .nav-link {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
      color: white;
      transform: translateX(6px);
      box-shadow: 0 4px 12px rgba(10, 54, 157, 0.25);
    }

    .nav-container .nav-item.active .nav-link::before {
      width: 100%;
      background: rgba(255, 255, 255, 0.1);
    }

    .nav-container .nav-link i {
      font-size: 22px;
      margin-right: var(--spacing-md);
      width: 30px;
      text-align: center;
      transition: var(--transition);
      flex-shrink: 0;
    }

    .nav-container .nav-link:hover i {
      transform: scale(1.1);
    }

    .nav-text {
      font-weight: 500;
      letter-spacing: 0.25px;
    }

    /* Layout Adjustments */
    .main-panel {
      margin-left: var(--sidebar-width);
      width: calc(100% - var(--sidebar-width));
      min-height: 100vh;
      transition: var(--transition);
    }

    .navbar {
      left: var(--sidebar-width);
      width: calc(100% - var(--sidebar-width));
      transition: var(--transition);
    }

    /* Collapsed Sidebar State */
    .sidebar.collapsed {
      width: var(--sidebar-collapsed-width);
    }

    .sidebar.collapsed .logo-text,
    .sidebar.collapsed .nav-text,
    .sidebar.collapsed .user-text {
      opacity: 0;
      width: 0;
      overflow: hidden;
    }

    .sidebar.collapsed .logo a {
      justify-content: center;
    }

    .sidebar.collapsed .nav-link {
      justify-content: center;
      padding: 14px 8px;
    }

    .sidebar.collapsed .nav-link i {
      margin-right: 0;
    }

    .sidebar.collapsed .username {
      justify-content: center;
    }

    .sidebar.collapsed .dropdown-arrow {
      display: none;
    }

    .sidebar.collapsed+.main-panel {
      margin-left: var(--sidebar-collapsed-width);
      width: calc(100% - var(--sidebar-collapsed-width));
    }

    /* Responsive Design */
    @media (max-width: 991px) {
      .mobile-toggle {
        display: flex;
      }

      .sidebar {
        transform: translateX(-100%);
        width: var(--sidebar-width);
        box-shadow: none;
      }

      .sidebar.show {
        transform: translateX(0);
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.3);
      }

      .sidebar-overlay {
        display: block;
      }

      .main-panel {
        width: 100%;
        margin-left: 0;
      }

      .navbar {
        left: 0;
        width: 100%;
        padding-left: 70px;
      }
    }

    @media (max-width: 576px) {
      .sidebar {
        width: 280px;
      }

      .nav-container .nav-link {
        padding: 16px var(--spacing-md);
        font-size: 15px;
      }

      .nav-container .nav-link i {
        font-size: 24px;
      }
    }

    /* Focus styles for accessibility */
    .nav-link:focus,
    .username:focus,
    .logo a:focus {
      outline: 2px solid var(--primary-light);
      outline-offset: 2px;
    }

    /* Animation for smooth transitions */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .nav-item {
      animation: slideIn 0.3s ease forwards;
    }

    .nav-item:nth-child(1) {
      animation-delay: 0.1s;
    }

    .nav-item:nth-child(2) {
      animation-delay: 0.15s;
    }

    .nav-item:nth-child(3) {
      animation-delay: 0.2s;
    }

    .nav-item:nth-child(4) {
      animation-delay: 0.25s;
    }

    .nav-item:nth-child(5) {
      animation-delay: 0.3s;
    }

    /* High contrast mode support */
    @media (prefers-contrast: high) {
      .sidebar {
        border-right: 2px solid var(--primary-color);
      }

      .nav-container .nav-link {
        border: 1px solid transparent;
      }

      .nav-container .nav-link:hover {
        border-color: var(--primary-color);
      }
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
    }
  </style>
  <style>
    /* Navbar Styles */
    .navbar {
      padding: 0.5rem 1rem;
      background: linear-gradient(135deg, #0A369D 0%, #1E88E5 100%);
      border: 0;
      border-radius: 0;
      box-shadow: 0 2px 20px 0px rgba(10, 54, 157, 0.2);
      transition: all 0.3s ease;
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      /* Changed: stretch full width */
      z-index: 1029;
      height: 70px;
      width: 100%;
      /* Changed: full width */
    }

    /* Adjust main content padding */
    .main-panel {
      padding-top: 70px;
      width: calc(100% - 260px);
      margin-left: 260px;
    }

    /* Navbar Components */
    .navbar .navbar-wrapper {
      display: flex;
      align-items: center;
      min-width: 200px;
    }

    .navbar .navbar-minimize {
      padding: 0;
      margin-right: 15px;
    }

    .navbar .navbar-minimize .btn {
      margin: 0;
      padding: 0;
      color: rgba(255, 255, 255, 0.9);
    }

    .navbar .navbar-minimize .btn:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }

    .navbar .navbar-brand {
      font-size: 1.25rem;
      font-weight: 500;
      color: #ffffff;
      text-transform: capitalize;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .navbar .navbar-collapse {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      flex: 1;
      min-width: 0;
    }

    .navbar .navbar-form {
      margin: 0;
      padding: 0;
      margin-right: 15px;
      flex: 0 1 300px;
    }

    .navbar .navbar-form .input-group {
      margin: 0;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(5px);
    }

    .navbar .navbar-form .form-control {
      border-radius: 20px;
      background: transparent;
      border: none;
      padding: 10px 15px;
      color: #ffffff;
      box-shadow: none;
      transition: all 0.3s ease;
    }

    .navbar .navbar-form .form-control::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .navbar .navbar-form .form-control:focus {
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
    }

    .navbar .navbar-form .btn {
      margin: 0;
      padding: 0;
      color: rgba(255, 255, 255, 0.9);
    }

    .navbar .navbar-form .btn:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }

    .navbar .navbar-nav {
      display: flex;
      align-items: center;
      margin-left: auto;
    }

    .navbar .nav-item {
      position: relative;
      margin: 0 5px;
    }

    .navbar .nav-link {
      padding: 0.5rem;
      color: rgba(255, 255, 255, 0.9);
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      border-radius: 50%;
    }

    .navbar .nav-link:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.1);
    }

    .navbar .nav-link i {
      font-size: 24px;
      line-height: 1;
    }

    /* Responsive Styles */
    @media (max-width: 991px) {
      .navbar {
        left: 0;
        width: 100%;
        padding-left: 70px;
        background: linear-gradient(135deg, #0A369D 0%, #1E88E5 100%);
      }

      .main-panel {
        width: 100%;
        margin-left: 0;
      }

      .navbar .navbar-collapse {
        position: fixed;
        top: 70px;
        right: -100%;
        width: 100%;
        height: calc(100vh - 70px);
        background: linear-gradient(135deg, #0A369D 0%, #1E88E5 100%);
        backdrop-filter: blur(10px);
        padding: 20px;
        transition: all 0.3s ease;
        z-index: 1028;
      }

      .navbar .navbar-collapse.show {
        right: 0;
      }

      .navbar .navbar-form {
        flex: 1;
        margin: 15px 0;
      }

      .navbar .navbar-nav {
        flex-direction: column;
        align-items: flex-start;
        width: 100%;

      }

      .navbar .nav-item {
        width: 100%;
        margin: 5px 0;
      }

      .navbar .nav-link {
        padding: 10px 0;
        width: 100%;
      }

      .navbar .navbar-form .input-group {
        background: rgba(255, 255, 255, 0.15);
      }

      /* Show sidebar inside mobileSidebar in mobile view */
      #mobileSidebar .sidebar {
        transform: none !important;
        position: static;
        width: 100%;
        box-shadow: none;
        background: #fff;
        z-index: 1;
      }

      #mobileSidebar .sidebar-wrapper {
        width: 100%;
      }
    }

    /* Mini sidebar adjustments */
    .sidebar-mini .navbar {
      left: 0;
      /* Changed: always full width */
      width: 100%;
      /* Changed: always full width */
      background: linear-gradient(135deg, #0A369D 0%, #1E88E5 100%);
    }

    .sidebar-mini .main-panel {
      width: calc(100% - 80px);
      margin-left: 80px;
    }

    /* Add subtle animation for hover effects */
    .navbar .nav-link,
    .navbar .navbar-minimize .btn,
    .navbar .navbar-form .btn {
      position: relative;
      overflow: hidden;
    }

    .navbar .nav-link::after,
    .navbar .navbar-minimize .btn::after,
    .navbar .navbar-form .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.3s ease, height 0.3s ease;
    }

    .navbar .nav-link:hover::after,
    .navbar .navbar-minimize .btn:hover::after,
    .navbar .navbar-form .btn:hover::after {
      width: 40px;
      height: 40px;
    }

    .mobile-sidebar {
      position: fixed;
      top: 70px;
      left: -260px;
      width: 260px;
      height: calc(100vh - 70px);
      background-color: #ffffff;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
      overflow-y: auto;
      z-index: 1030;
      transition: left 0.3s ease;
    }

    .mobile-sidebar.show {
      left: 0;
    }
  </style>


  {% block extra_css %}{% endblock %}
</head>

<body class="">
  <div class="wrapper">
    <!-- Sidebar -->
    {% include 'CUSTApp/AdminDashboard/sidebar.html' with active_page=active_page %}
    <div class="main-panel">
      <!-- Navbar -->
      {% include 'navbar.html' with page_title=page_title %}
      <!-- Page Content -->
      <div class="content">
        <div class="container-fluid">{% block content %} {% endblock %}</div>
      </div>
    </div>
  </div>

  <!-- Core JS Files -->
  <script src="{% static 'assets/js/core/jquery.min.js' %}"></script>
  <script src="{% static 'assets/js/core/popper.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/sweetalert2.js' %}"></script>
  <script src="{% static 'assets/js/core/bootstrap-material-design.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/perfect-scrollbar.min.js' %}"></script>
  <script src="{% static 'assets/js/material-dashboard.js' %}?v=2.2.2" type="text/javascript"></script>
  <script src="{% static 'js/auth.js' %}" type="text/javascript"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-messaging-compat.js"></script>
  <script src="https://cdn.ckeditor.com/ckeditor5/41.1.0/classic/ckeditor.js"></script>

  <!-- Your JS file -->
  <script type="module" src="{% static 'js/registerFirebaseServiceWorker.js' %}"></script>

  <!-- JavaScript for Navbar and Sidebar -->
  <script>
    $(document).ready(function () {
      // Update username in sidebar from localStorage
      if (!checkAuth()) {
        return;
      }
      function fetchUserProfile() {
        $.ajax({
          url: `/users/`,
          type: "GET",
          success: function (resp) {
            const data = resp[0];
            $("user-email").text(data.email)
            if (data.picture) {
              console.log(data.picture);
              $("#user-img").attr("src", data.picture);
            }
          },
          error: function () {
            console.error("error")
          },
        });
      }
      fetchUserProfile();
      $(".user-name").text(localStorage.getItem("user_name") || "User");

      // Function to get CSRF token
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          const cookies = document.cookie.split(";");
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === name + "=") {
              cookieValue = decodeURIComponent(
                cookie.substring(name.length + 1)
              );
              break;
            }
          }
        }
        return cookieValue;
      }

      // Logout functionality
      $("#logoutButton").on("click", function (e) {
        e.preventDefault();
        logout();
      });
    });
  </script>

  <script>
    // Sidebar functionality
    document.addEventListener('DOMContentLoaded', function () {
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebarOverlay = document.getElementById('sidebarOverlay');
      const dropdownToggles = document.querySelectorAll('[data-bs-toggle="collapse"]');

      // Mobile sidebar toggle
      if (sidebarToggle) {
        sidebarToggle.addEventListener('click', function () {
          sidebar.classList.toggle('show');
          sidebarOverlay.classList.toggle('show');
          this.classList.toggle('active');

          // Prevent body scroll when sidebar is open on mobile
          document.body.style.overflow = sidebar.classList.contains('show') ? 'hidden' : '';
        });
      }

      // Close sidebar when clicking overlay
      if (sidebarOverlay) {
        sidebarOverlay.addEventListener('click', function () {
          sidebar.classList.remove('show');
          this.classList.remove('show');
          sidebarToggle.classList.remove('active');
          document.body.style.overflow = '';
        });
      }

      // Handle dropdown toggles
      dropdownToggles.forEach(function (toggle) {
        toggle.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('data-bs-target'));
          const isExpanded = this.getAttribute('aria-expanded') === 'true';

          // Close all other dropdowns
          dropdownToggles.forEach(function (otherToggle) {
            if (otherToggle !== toggle) {
              otherToggle.setAttribute('aria-expanded', 'false');
              const otherTarget = document.querySelector(otherToggle.getAttribute('data-bs-target'));
              if (otherTarget) {
                otherTarget.classList.remove('show');
              }
            }
          });

          // Toggle current dropdown
          this.setAttribute('aria-expanded', !isExpanded);
          if (target) {
            target.classList.toggle('show');
          }
        });
      });

      // Close sidebar on navigation (mobile)
      const navLinks = document.querySelectorAll('.sidebar .nav-link');
      navLinks.forEach(function (link) {
        link.addEventListener('click', function () {
          if (window.innerWidth <= 991) {
            sidebar.classList.remove('show');
            sidebarOverlay.classList.remove('show');
            sidebarToggle.classList.remove('active');
            document.body.style.overflow = '';
          }
        });
      });

      // Handle window resize
      window.addEventListener('resize', function () {
        if (window.innerWidth > 991) {
          sidebar.classList.remove('show');
          sidebarOverlay.classList.remove('show');
          sidebarToggle.classList.remove('active');
          document.body.style.overflow = '';
        }
      });

      // Add keyboard navigation support
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && sidebar.classList.contains('show')) {
          sidebar.classList.remove('show');
          sidebarOverlay.classList.remove('show');
          sidebarToggle.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const menuToggle = document.getElementById('menuToggle');
      const mobileSidebar = document.getElementById('mobileSidebar');

      if (menuToggle && mobileSidebar) {
        menuToggle.addEventListener('click', function () {
          if (window.innerWidth < 992) {
            mobileSidebar.classList.toggle('show');
          }
        });
      }

      const logoutButton = document.getElementById('logoutButton');
      if (logoutButton) {
        logoutButton.addEventListener('click', function (e) {
          e.preventDefault();
          console.log('Logging out...');
          // Add your logout functionality here
          window.localStorage.clear("access_token")
          window.localStorage.clear("refresh_token")
        });
      }
    });
  </script>

  <!-- Page-specific JS -->
  {% block extra_js %}{% endblock %}
</body>

</html>